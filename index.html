<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Шақыру Билеті | Ақтілек & Арай</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Yeseva One (titles) және Montserrat (body) -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Yeseva+One&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <style>
        :root {
            /* Сіз көрсеткен жасыл және алтын түстер */
            --primary-start: #2d5a27; 
            --primary-end: #1b4332;
            --gold-start: #d4af37;
            --gold-end: #f5e6a0;
            --bg-soft: #fffdf2;
            
            --primary-gradient: linear-gradient(135deg, var(--primary-start) 0%, var(--primary-end) 100%);
            --gold-gradient: linear-gradient(135deg, var(--gold-start) 0%, var(--gold-end) 100%);
        }

        body {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600; /* Montserrat Semibold */
            background: radial-gradient(circle at top, #ffffff 0%, var(--bg-soft) 100%);
            overflow-x: hidden;
            scroll-behavior: smooth;
            background-attachment: fixed;
            color: #1a1a1a;
        }

        /* Yeseva One шрифті қалыпты қалыңдықта (жирный емес) */
        h1, h2, h3, .fancy-font { 
            font-family: 'Yeseva One', serif; 
            font-weight: 400 !important;
            letter-spacing: 0.5px;
        }

        /* Floating Action Buttons */
        .floating-action-btn {
            position: fixed;
            right: 20px;
            z-index: 50;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 20px;
            border-radius: 30px;
            color: white;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .floating-action-btn:active { transform: scale(0.9); }
        .music-btn-fixed { bottom: 30px; background: var(--primary-gradient); }
        .wish-btn-fixed { bottom: 95px; background: var(--gold-gradient); }

        .floating-action-btn span {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .pulse-effect { animation: pulse-gold 2s infinite; }
        @keyframes pulse-gold {
            0% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0.6); }
            70% { box-shadow: 0 0 0 15px rgba(212, 175, 55, 0); }
            100% { box-shadow: 0 0 0 0 rgba(212, 175, 55, 0); }
        }
        
        .spin { animation: spin 5s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        .accent-text { color: var(--primary-start); }
        .gold-accent-text { color: var(--gold-start); }

        .highlight-section {
            background: white; 
            border-radius: 24px;
            padding: 35px 25px;
            margin: 30px 15px;
            box-shadow: 0 10px 30px rgba(27, 67, 50, 0.05);
            border: 1px solid rgba(212, 175, 55, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        .highlight-section::before {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; height: 4px;
            background: var(--gold-gradient);
        }

        .wish-card {
            background: linear-gradient(to right, #ffffff, #fffdf2);
            border-left: 5px solid var(--primary-start);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.03);
        }

        .custom-input {
            width: 100%; padding: 1.1rem 1.4rem; border-radius: 15px; border: 2px solid #f0f0f0;
            background-color: #fafafa; font-weight: 600; transition: all 0.3s ease; outline: none;
        }
        .custom-input:focus { 
            border-color: var(--gold-start); 
            background-color: white; 
            box-shadow: 0 0 0 4px rgba(212, 175, 55, 0.1); 
        }

        .primary-action-btn {
            width: 100%; padding: 1.1rem; border-radius: 15px; 
            background: var(--primary-gradient);
            color: white; font-weight: 600; text-transform: uppercase; letter-spacing: 2px;
            box-shadow: 0 8px 20px rgba(27, 67, 50, 0.3); transition: all 0.3s ease;
        }
        .primary-action-btn:hover { transform: translateY(-3px); box-shadow: 0 12px 25px rgba(27, 67, 50, 0.4); }

        .gold-action-btn {
            display: inline-block; padding: 1rem 3rem; border-radius: 35px; 
            background: var(--gold-gradient);
            color: white; font-weight: 600; text-transform: uppercase; letter-spacing: 1.5px;
            box-shadow: 0 6px 15px rgba(212, 175, 55, 0.3); transition: all 0.3s ease;
            font-size: 0.8rem;
        }
        .gold-action-btn:hover { transform: scale(1.05); }

        .time-item-box {
            background: linear-gradient(135deg, #ffffff 0%, #fffdf2 100%);
            border: 1px solid rgba(212, 175, 55, 0.15);
        }
        
        .ornament-img {
            opacity: 0.15;
            filter: sepia(1) saturate(5) hue-rotate(80deg);
        }
        
        .wish-name { font-family: 'Yeseva One', serif; color: var(--primary-start); font-weight: 400; }
    </style>
</head>
<body class="antialiased">

    <!-- Floating Buttons -->
    <button onclick="toggleMusic()" class="floating-action-btn music-btn-fixed">
        <i id="musicIcon" class="fas fa-music"></i>
        <span>Әуен қосу</span>
    </button>

    <button onclick="openWishModal()" class="floating-action-btn wish-btn-fixed pulse-effect">
        <i class="fas fa-pen-nib"></i>
        <span>Тілек білдіру</span>
    </button>

    <audio id="bgMusic" loop>
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
    </audio>

    <div class="max-w-md mx-auto bg-white min-h-screen shadow-2xl relative overflow-hidden border-x-8 border-[#d4af37]">

        <header class="text-center pt-12 pb-10 px-6 relative z-10" data-aos="fade-down">
            <p class="text-5xl mb-2 fancy-font accent-text text-center">Үйлену тойы</p>
            <div class="w-24 h-1 bg-gradient-to-r from-transparent via-[#d4af37] to-transparent mx-auto mt-4"></div>
        </header>

        <!-- Main Photo Section -->
        <div class="px-6 mb-12" data-aos="zoom-in">
            <div class="aspect-[3/4] rounded-t-[120px] rounded-b-2xl overflow-hidden shadow-[0_20px_50px_rgba(0,0,0,0.2)] border-4 border-[#d4af37] relative">
                <img src="" 
                     alt="Жұптың суреті" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"></div>
                <div class="absolute inset-0 flex flex-col items-center justify-end pb-12 text-white px-4 text-center">
                    <h1 class="text-6xl fancy-font leading-tight drop-shadow-lg">
                        Ақтілек <br> 
                        <span class="text-5xl gold-accent-text italic">&</span> <br> 
                        Арай
                    </h1>
                </div>
            </div>
        </div>

        <!-- Invitation Intro -->
        <section class="highlight-section text-center" data-aos="fade-up">
            <h2 class="text-4xl mb-6 accent-text">Құрметті қонақтар!</h2>
            <p class="leading-relaxed text-gray-600 mb-8 text-lg font-light italic px-4">
                Сіздерді ұлымыз бен келініміздің шаңырақ көтеру тойының қадірлі қонағы болуға шақырамыз! Тілеулес ағайын-туыс, дос-жаранның ортасында қуанышымызға ортақ болыңыздар.
            </p>
            <div class="py-8 bg-gradient-to-b from-[#fffdf2] to-white rounded-2xl border border-[#d4af37]/10">
                <p class="text-lg text-gray-400 font-semibold mb-2">Той иелері:</p>
                <p class="text-2xl font-bold accent-text tracking-widest uppercase">Қанат - Мирамкул</p>
            </div>
        </section>

        <!-- Date and Time -->
        <section class="highlight-section text-center" data-aos="fade-up">
            <h3 class="text-2xl mb-6 font-bold accent-text fancy-font">Күні мен уақыты</h3>
            <div class="flex items-center justify-center gap-8 py-4">
                <div class="flex flex-col items-center">
                    <div class="w-14 h-14 rounded-full bg-gradient-to-br from-[#fffdf2] to-[#f5f0d5] flex items-center justify-center mb-2 border border-[#d4af37]/20">
                        <i class="far fa-calendar-alt text-2xl gold-accent-text"></i>
                    </div>
                    <p class="text-xl font-bold">7 Ақпан</p>
                    <p class="text-sm text-gray-400 font-semibold">2026 жыл</p>
                </div>
                <div class="w-[1px] h-16 bg-gradient-to-b from-transparent via-gray-200 to-transparent"></div>
                <div class="flex flex-col items-center">
                    <div class="w-14 h-14 rounded-full bg-gradient-to-br from-[#fffdf2] to-[#f5f0d5] flex items-center justify-center mb-2 border border-[#d4af37]/20">
                        <i class="far fa-clock text-2xl gold-accent-text"></i>
                    </div>
                    <p class="text-xl font-bold">17:00</p>
                    <p class="text-sm text-gray-400 font-semibold">Басталуы</p>
                </div>
            </div>
        </section>

        <!-- Countdown -->
        <section class="highlight-section text-center" data-aos="fade-up">
            <h3 class="text-center text-2xl mb-8 font-bold accent-text fancy-font">Тойға дейін:</h3>
            <div class="flex justify-center gap-4">
                <div class="time-item-box w-20 py-4 rounded-2xl shadow-sm text-center">
                    <div class="text-3xl font-black accent-text" id="days">00</div>
                    <div class="text-[10px] uppercase font-bold text-gray-400 tracking-tighter">Күн</div>
                </div>
                <div class="time-item-box w-20 py-4 rounded-2xl shadow-sm text-center">
                    <div class="text-3xl font-black accent-text" id="hours">00</div>
                    <div class="text-[10px] uppercase font-bold text-gray-400 tracking-tighter">Сағат</div>
                </div>
                <div class="time-item-box w-20 py-4 rounded-2xl shadow-sm text-center">
                    <div class="text-3xl font-black accent-text" id="minutes">00</div>
                    <div class="text-[10px] uppercase font-bold text-gray-400 tracking-tighter">Мин</div>
                </div>
                <div class="time-item-box w-20 py-4 rounded-2xl shadow-sm text-center">
                    <div class="text-3xl font-black accent-text" id="seconds">00</div>
                    <div class="text-[10px] uppercase font-bold text-gray-400 tracking-tighter">Сек</div>
                </div>
            </div>
        </section>

        <!-- Map Section -->
        <section class="highlight-section text-center" data-aos="fade-up">
            <h2 class="text-4xl mb-6 accent-text">Мекенжайымыз</h2>
            <div class="bg-gradient-to-br from-white to-[#fffdf2] p-10 rounded-3xl border border-[#d4af37]/10 shadow-inner">
                <i class="fas fa-map-marker-alt text-5xl gold-accent-text mb-6"></i>
                <h3 class="text-3xl font-bold mb-3 accent-text uppercase tracking-widest text-center">"Empire M"</h3>
                <p class="text-lg text-gray-500 mb-8 italic font-semibold text-center">Қызылорда қаласы</p>
                <a href="https://2gis.kz/kyzylorda/geo/70000001062756672/65.526119,44.795737" target="_blank" class="gold-action-btn">
                    Картаны ашу
                </a>
            </div>
        </section>

        <!-- RSVP Form -->
        <section class="highlight-section" data-aos="fade-up">
            <h2 class="text-3xl text-center mb-2 accent-text font-bold uppercase tracking-widest">Тойға келесіз бе?</h2>
            <p class="text-center text-sm text-gray-400 mb-8 font-semibold italic">Жауабыңызды күтеміз</p>
            <form id="rsvpForm" class="space-y-6">
                <input type="hidden" name="formType" value="rsvp">
                <input type="text" name="name" placeholder="Аты-жөніңіз" required class="custom-input">
                <select name="status" class="custom-input text-gray-500">
                    <option value="Келемін">Келемін</option>
                    <option value="Жұбайыммен келемін">Жұбайыммен келемін</option>
                    <option value="Келе алмаймын">Келе алмаймын</option>
                </select>
                <button type="submit" class="primary-action-btn">Жіберу</button>
            </form>
        </section>

        <!-- Wishes List -->
        <section class="highlight-section" data-aos="fade-up">
            <h2 class="text-4xl text-center mb-6 accent-text fancy-font">Ақ тілектер</h2>
            <div id="wishesLoading" class="text-center py-8 text-center">
                <div class="inline-block animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-[#1b4332]"></div>
            </div>
            <div id="wishesContainer" class="max-h-[500px] overflow-y-auto px-1 space-y-6 hidden"></div>
            <div id="noWishes" class="text-center text-gray-300 py-6 hidden italic"><p>Алғашқы тілек білдіруші болыңыз...</p></div>
        </section>

        <!-- Telegram Channel (Updated Link) -->
        <section class="highlight-section text-center" data-aos="fade-up">
            <h2 class="text-3xl mb-4 accent-text fancy-font">Той суреттері</h2>
            <p class="text-gray-500 mb-8 font-semibold italic px-4 text-center">
                Барлық фото мен видеоларды осы каналдан көре аласыз:
            </p>
            <a href="https://t.me/aktilekaraytoy" target="_blank" class="inline-flex items-center gap-4 bg-gradient-to-r from-[#0088cc] to-[#00aaff] text-white px-10 py-5 rounded-full font-bold shadow-xl transition hover:brightness-110 uppercase text-xs tracking-widest">
                <i class="fab fa-telegram-plane text-2xl"></i>
                Телеграм канал
            </a>
        </section>

        <!-- Footer -->
        <footer class="bg-gradient-to-b from-[#2d5a27] to-[#1b4332] text-white text-center py-16 relative border-t-8 border-[#d4af37]">
            <h2 class="text-5xl fancy-font mb-4 gold-accent-text text-center">Ақтілек & Арай</h2>
            <p class="text-gray-300 text-sm font-semibold tracking-[0.3em] uppercase text-center">Біз сізді күтеміз!</p>
            <div class="mt-10 text-[10px] text-white/30 uppercase tracking-[0.5em] text-center">Қызылорда - 2026</div>
        </footer>
    </div>

    <!-- Wish Modal -->
    <div id="wishModal" class="fixed inset-0 z-[100] hidden flex items-center justify-center px-4 bg-black/80 backdrop-blur-md transition-all duration-300">
        <div class="relative bg-white w-full max-w-md p-10 rounded-[35px] shadow-2xl border-4 border-[#d4af37]">
            <button onclick="closeWishModal()" class="absolute top-6 right-6 text-gray-300 hover:text-gray-600 transition"><i class="fas fa-times text-2xl"></i></button>
            <h2 class="text-4xl text-center mb-2 accent-text fancy-font">Жылы лебіз</h2>
            <p class="text-[10px] text-center font-bold gold-accent-text mb-8 tracking-widest uppercase">✨ Үздік тілекке сыйлық беріледі ✨</p>
            <form id="wishForm" class="space-y-5">
                <input type="hidden" name="formType" value="wish">
                <input type="text" name="name" placeholder="Аты-жөніңіз" required class="custom-input">
                <textarea name="message" placeholder="Ақ тілегіңіз..." rows="4" required class="custom-input resize-none"></textarea>
                <button type="submit" class="primary-action-btn">Жіберу</button>
            </form>
        </div>
    </div>

    <script>
        AOS.init({ duration: 1200, once: true });
        
        const bgMusic = document.getElementById('bgMusic');
        const musicIcon = document.getElementById('musicIcon');
        let isPlaying = false;

        function toggleMusic() {
            if (isPlaying) { 
                bgMusic.pause(); 
                musicIcon.classList.replace('fa-pause', 'fa-music'); 
                musicIcon.parentElement.classList.remove('spin');
            } else { 
                bgMusic.play(); 
                musicIcon.classList.replace('fa-music', 'fa-pause'); 
                musicIcon.parentElement.classList.add('spin'); 
            }
            isPlaying = !isPlaying;
        }

        const modal = document.getElementById('wishModal');
        function openWishModal() { modal.classList.remove('hidden'); }
        function closeWishModal() { modal.classList.add('hidden'); }

        const weddingDate = new Date('February 7, 2026 17:00:00').getTime();
        setInterval(() => {
            const distance = weddingDate - new Date().getTime();
            if (distance < 0) return;
            document.getElementById("days").innerText = Math.floor(distance / 86400000).toString().padStart(2, '0');
            document.getElementById("hours").innerText = Math.floor((distance % 86400000) / 3600000).toString().padStart(2, '0');
            document.getElementById("minutes").innerText = Math.floor((distance % 3600000) / 60000).toString().padStart(2, '0');
            document.getElementById("seconds").innerText = Math.floor((distance % 60000) / 1000).toString().padStart(2, '0');
        }, 1000);

        const scriptURL = 'https://script.google.com/macros/s/AKfycbwmv5hGXDeRz9OPrELfjzV-MrQsXM5pjdtezf3xf3vJf0kqZsNv2PGHaQzhS_fr-PzO/exec';

        function fetchWishes() {
            fetch(scriptURL + '?t=' + Date.now(), { redirect: 'follow' })
                .then(res => res.json())
                .then(wishes => {
                    const container = document.getElementById('wishesContainer');
                    const loading = document.getElementById('wishesLoading');
                    const noWishes = document.getElementById('noWishes');
                    
                    if (loading) loading.style.display = 'none';
                    if (!wishes || wishes.length === 0 || !Array.isArray(wishes)) {
                        if (noWishes) noWishes.style.display = 'block';
                    } else {
                        container.innerHTML = '';
                        container.classList.remove('hidden');
                        if (noWishes) noWishes.style.display = 'none';
                        wishes.forEach(w => {
                            if(w.name && w.message) {
                                const d = document.createElement('div');
                                d.className = 'wish-card';
                                d.innerHTML = `<div class="wish-name text-lg">${w.name}</div><div class="text-gray-500 mt-2 font-semibold italic leading-relaxed">${w.message}</div>`;
                                container.appendChild(d);
                            }
                        });
                    }
                }).catch(err => {
                    if (document.getElementById('wishesLoading')) {
                        document.getElementById('wishesLoading').innerHTML = '<p class="text-gray-400 text-xs italic">Тілектерді жүктеу мүмкін болмады.</p>';
                    }
                });
        }

        window.addEventListener('load', fetchWishes);

        [document.getElementById('rsvpForm'), document.getElementById('wishForm')].forEach(f => {
            f.addEventListener('submit', e => {
                e.preventDefault();
                const b = f.querySelector('button');
                const t = b.innerText;
                b.innerText = "...";
                b.disabled = true;

                fetch(scriptURL, { method: 'POST', body: new FormData(f) })
                .then(() => { 
                    alert("Рахмет! Жауабыңыз жіберілді."); 
                    f.reset();
                    b.innerText = t;
                    b.disabled = false;
                    if(f.id === 'wishForm') { closeWishModal(); setTimeout(fetchWishes, 2000); }
                })
                .catch(err => {
                    alert("Хабарлама жіберілді!"); 
                    f.reset();
                    b.innerText = t; b.disabled = false;
                    if(f.id === 'wishForm') { closeWishModal(); setTimeout(fetchWishes, 2000); }
                });
            });
        });
    </script>
</body>
</html>
